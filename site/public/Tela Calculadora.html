<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style-calculadora.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Calculadora</title>
</head>
<body>
    <div class="header">
        <div class="container">
          <a href="./Tela Inicial.html">
            <img src="assets/Logo.png" alt="logo" class="logo1">
          </a>
            <h1 class="logo"></h1>
            <div class="nav-bar-left">
                <ul>
                    <li><a class="a-nav-left" href="./index.html">Home</a></li>
                    <li><a class="a-nav-left" href="./Tela plano de sensores.html">Planos de sensores</a></li>
                    <li><a class="a-nav-left" href="./Tela Calculadora.html" target="_blank">Calculadora</a></li>
                    <li><a class="a-nav-left" href="./Tela Contato.html">Contato</a></li>
                    <li ><a  id="dashBoard" class="a-nav-left" href="./Tela Dashboard/Tela DashBoard.html">Dashboard</a></li>
                    <li><a class="a-nav-left" href="./Tela Quantum.html">Equipe Quantum</a></li>
                </ul>
            </div>
            <div class="nav-bar-right">

                <a id="login" class="a-nav-right esconder" href="./Login.html" > <b>Login</b></a>
                <a id="cadastro" class="esconder" href="./Tela Cadastro.html" > <button class="button-cadastro">  <b>Cadastro</b> </button></a>

                <img id="logo" src="assets/Logo.png" class="logo1">
            </div>
            <div class="barra_lateral">
                <i onclick="gerenciarMenu()" class="fa-solid fa-bars" style="color: #e8e1f1;"></i>
            </div>
        </div>
    </div>

<main>
    <div class="calculadora">
        <div class="calculadora-box">
            <h2 class="titulo">Calculadora Financeira</h2>
            <div class="calculadora-style">
                <label>Insira quantos m² tem a sua estufa:</label><input class="inputs" id="input_tamanhoEstufa"><br>
            </div>
            <div class="calculadora-style">
                <label>Insira quantas estufas você possui:</label><input class="inputs" id="input_qtdEstufa"><br>
            </div>
            <div class="calculadora-style">
                <label>Insira o preço do quilo da sua safra:</label><input class="inputs" id="input_precoQuilo"><br>
            </div>
            <div class="calculadora-style">
                <label>Insira o quanto (em porcentagem) você perdeu de colheita nessa safra:</label><input class="inputs" id="input_perda"><br>
            </div>
            <div class="calculadora-style-button">
                <button class="button-calcular" onclick="calcular()">Calcular</button>
            </div>
        </div>
    </div>
    <div class="fundo-msg" id="fundo" style="display: none;">
        <div class="msg-input" id="mensagem">.</div>
    </div>
    
</main>

<footer>
    <div id="footer_content">
        <div id="footer_contacts">
            <img src="assets/Logo.png" alt="logo" class="logo2">
            <p>É tudo sobre o seu sonho.</p>
            <div id="footer_social_media">
                <a href="#" class="footer-link" id="instagram">
                    <i class="fa-brands fa-instagram"></i>
                </a>
                <a href="#" class="footer-link" id="facebook">
                    <i class="fa-brands fa-facebook"></i>
                </a>
                <a href="" class="footer-link" id="email">
                    <i class="fa-solid fa-envelope"></i>
                </a>
            </div>
            <div id="footer_subscribe">
              <p>
                  Entre com seu e-mail para receber noticías sobre nossas novas soluções
              </p>
              <div id="input_email">
                  <input type="text" name="" id="email_ipt">
                  <button class="button-ipt">
                      <i class="fa-solid fa-envelope"></i>
                  </button>
              </div>
          </div>
        </div>
        <div id="div-footer-list">
            <ul class="footer-list">
                <li>
                    <h3> Extensão de atuação </h3>
                </li>
                <li>
                    <img src="assets/mapa-do_brasil.png" alt="mapa_do_brasil" class="mapa-br">
                </li>
                <li class="footer_li">
                    <a href="./Tela Inicial.html" class="footer-link">Home</a>
                    <a href="./Tela Calculadora.html" class="footer-link">Calculadora</a>
                    <a href="./Tela plano de sensores.html" class="footer-link">Planos de sensores</a>
                </li>
            </ul>
        </div>

        <ul class="footer-list">
            <li>
                <h3>Time Quantum Sensors</h3>
            </li>
            <li>
                <a href="./Tela Contato.html" class="footer-link">Contato</a>
            </li>
            <li>
                <a href="./Tela Contato.html" class="footer-link">Trabalhe conosco</a>
            </li>
            <li>
                <a href="./Tela Quantum.html" class="footer-link">equipe Quantum Sensors</a>
            </li>

        </ul>
    </div>
    <div id="footer_copyright">
        &#169
        2023 all rights reserved by Quantum Sensors
    </div>
</footer>

</body>
</html>

<script>
    function calcular() {
        var estufa = Number(input_tamanhoEstufa.value);
        var precoQuilo = Number(input_precoQuilo.value);
        var perda = Number(input_perda.value);
        var qtdEstufa = Number(input_qtdEstufa.value);

        var plantaPorEstufa = estufa * 1.5;
        var totalPlantas = plantaPorEstufa * qtdEstufa;
        var totalDeFolhas = totalPlantas * 20;
        var pesoFolha = 1 * 0.012;
        var pesoPorEstufa = totalDeFolhas * pesoFolha;
        var precoPorEstufa = pesoPorEstufa * precoQuilo;
        var prejuizo = precoPorEstufa * (perda/100);
        var precoTotal = precoPorEstufa - prejuizo;
        
        mensagem.innerHTML = `<h2> Resultado </h2> <br>
        Como a cada m² pode-se plantar uma muda e meia e cada planta tem em média 20 folhas de tabaco, sua última colheita teve uma média de <strong>${plantaPorEstufa}</strong> plantas por estufa e <strong>${totalDeFolhas}</strong> folhas de tabaco no total. <br><br>
        O seu faturamento total sem os prejuízos seria <strong>R$${precoPorEstufa}</strong> <br>
        Porém, como você teve <strong class="red">R$${prejuizo}</strong> de prejuízo, o valor total da sua safra foi de <strong>R$${precoTotal}</strong> <br><br>
        Porém poderia ter sido em média <strong class="green">R$${prejuizo/4}</strong> maior, com um controle de temperatura e umidade adequados.`;
   

        var display = document.getElementById("fundo").style.display;
        if(display == 'none') {
            document.getElementById("fundo").style.display = 'block'
        } else {
            document.getElementById("fundo").style.display = 'none'
        }
   
   }

   var idEmpresa = sessionStorage.ID_EMPRESA
  validacao()


  function validacao() {
    var dashboard = document.getElementById("dashBoard")
    var login = document.getElementById("login")
    var cadastro = document.getElementById("cadastro")
    var logo = document.getElementById("logo")

  if (idEmpresa == undefined) {
    dashboard.classList.add('esconder')
    login.classList.remove('esconder')
    cadastro.classList.remove('esconder')
    logo.classList.add('esconder')

    } else {

        fetch("/usuarios/validacao", {
            method: 'GET'
        }).then(function (resposta) {

            if (resposta.ok) {
                if (resposta.status == 204) {
                    console.log("nenhuma resposta encontrada")
                }

                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));

                    dashboard.classList.remove('esconder')
                    login.classList.add('esconder')
                    cadastro.classList.add('esconder')
                    logo.classList.remove('esconder')
              

                });
            } else {
                throw ('Houve um erro na API!');
            }
        }).catch(function (resposta) {
            console.error(resposta);

        });
      }

    }
</script>